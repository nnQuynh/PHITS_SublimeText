 file = phits1.inp

[ Title ]
Voxel phantom automatically generated by dicom2phits

[ Parameters ]
 icntl    =           0     # (D=0) 3:ECH 5:NOR 6:SRC 7,8:GSH 11:DSH 12:DUMP
 maxcas   =        5000     # (D=10) number of particles per one batch
 maxbch   =           2     # (D=10) number of batches
 file(6)  = phits.out       # (D=phits.out) general output file name
   ivoxel = 1
 file(18) = voxel.bin

$ Optimized for Photon Therapy
 emin(2)  = 1.000000000E-10 # (D=1.0) cut-off energy of neutron (MeV)
 dmax(2)  =  20.0000000     # (D=emin(2)) data max. energy of neutron (MeV)
 emin(12) = 1.000000000E-01 # (D=1.d9) cut-off energy of electron (MeV)
 emin(13) = 1.000000000E-01 # (D=1.d9) cut-off energy of positron (MeV)
 emin(14) = 1.000000000E-03 # (D=1.d9) cut-off energy of photon (MeV)
 dmax(12) =  1000.00000     # (D=emin(12)) data max. energy of electron (MeV)
 dmax(13) =  1000.00000     # (D=emin(13)) data max. energy of positron (MeV)
 dmax(14) =  1000.00000     # (D=emin(14)) data max. energy of photon (MeV)
 igamma   =           2     # (D=0) 0:No, 1:Old, 2:EBITEM, 3:EBITEM+Isomer
 ipnint   =           1     # (D=0) photonuclear GDR, 1:analog, -1:implicit itall
$ Library data paths for file(7) & file(14)
 infl:{libpath.inp}

[ Transform ]
$ Transform system according to DICOM header
tr500    -32.50000   -32.50000   -29.75100
        1.00000   0.00000   0.00000
        0.00000   1.00000   0.00000
        0.00000   0.00000   1.00000
     1

set: c91[    -0.5    ] $ isocenter x
set: c92[     6.5    ] $ isocenter y
set: c93[    -9.0    ] $ isocenter z
set: c94[     100.0  ] $ beam distance 
set: c95[     9.0    ] $ irradiation field x length
set: c96[     8.0    ] $ irradiation field z length
set: c97[     0.0    ] $ gantory angle
set: c98[cos(c97/180*pi) ] $ cos
set: c99[sin(c97/180*pi) ] $ sin

tr600       c91*(1-c98)+c92*c99 -c91*c99+c92*(1-c98) 0
            c98 -c99  0
            c99  c98  0
     	    0    0    1
     	    1

[ Source ]
$ parameters
set: c81[  128]  $ number of x pixel
set: c82[  128]  $ number of y pixel
set: c83[   74]  $ number of z pixel
set: c84[     0.50781] $ unit voxel x
set: c85[     0.50781] $ unit voxel y
set: c86[     0.50000] $ unit voxel z
set: c87[    -0.06348] $ smallest x
set: c88[    -0.06348] $ smallest y
set: c89[    -0.12500] $ smallest z
set: c90[     0.00001] $ small quota

   trcl = 600
 s-type = 5
     x0 =  c91
     x1 =  c91
     y0 =  c92-c94
     y1 =  c92-c94
     z0 =  c93
     z1 =  c93
    dir =  0.0
    phi =  90
    dom = asin(7.0/c94)*180.0/pi
   proj =  photon
 e-type = 1
     ne = 28
 infl:{spectrum.inp}

[ Surface ]
$ Unit voxel at smallest x & y
 5000 rpp c87 c87+c84 c88 c88+c85 c89 c89+c86
$ Outer region
   99 so 500
$ Main Space
   97 rpp c87+c90 c87+c81*c84-c90 c88+c90 c88+c82*c85-c90 c89+c90 c89+c83*c86-c90
   98 500 rpp c87+c90 c87+c81*c84-c90 c88+c90 c88+c82*c85-c90 c89+c90 c89+c83*c86-c90
$ Colimator inside
   90 rpp c91-0.1*c95 c91+0.1*c95 c92-0.9*c94 c92-0.8*c94 c93-0.1*c96 c93+0.1*c96
$ Colimator outside
   91 rpp c91-0.5*c95 c91+0.5*c95 c92-0.9*c94 c92-0.8*c94 c93-0.5*c96 c93+0.5*c96

[ Cell ]
$ Material universe
 infl:{universe.inp}
$ Voxel universe
 5000 0 -5000 lat=1 u=5000
      fill= 0: 127 0: 127 0:  73
$ infl:{voxel.inp}
$ The above line should be commented out when ivoxel=1
$ Main space
   97  0   -97 trcl=500 fill=5000 $ Region filled with voxel phantom
   98  1 -1.21e-3  -99 98 #90     $ Air
   99 -1    99                    $ Outer region
   90 -1       90 -91             $ Void colimator

[ Material ]
 MAT[1] $ Air 1.21e-3 g/cm3
           1H      7.199E-09
          12C      7.585E-09
          14N      3.910E-05
          16O      1.054E-05

$ Additional material should be defined above
 infl:{material.inp}
$ Additional mat color should be defined below

[ T-3Dshow ] off
   title  = [t-3dshow: icntl=11]
   file   = CT3D.out
       x0 = c87+c81*c84/2+(   -32.50000)
       y0 = c88+c82*c85/2+(   -32.50000)
       z0 = c89+c83*c86/2+(   -29.75100)
    e-the =  60.0000
    e-phi =  290.00000
    l-the =  40.0000
    l-phi =  310.00000
    w-wdt =     77.99998
    w-hgt =     89.75164
    w-dst =    269.25493
   heaven =   z
    resol =   1
   shadow =   1
   epsout =   1
 material =  -1
             5001

[ T-Deposit ]
 title  = [t-deposit: icntl=0]
 file   = deposit-xy-1.out
 mesh   = xyz
 x-type = 2
 nx     =  128
 xmin   = c87        -32.50000
 xmax   = c87+c81*c84-32.50000
 y-type = 2
 ny     =  128
 ymin   = c88        -32.50000
 ymax   = c88+c82*c85-32.50000
 z-type = 2
 nz     =    1
 zmin   = c93        -1.0
 zmax   = c93        +1.0
 unit   = 0
 axis   = xy
 output = dose
 epsout = 1
 gshow  = 1
 gslat  = 0

[ T-Deposit ]
 title  = [t-deposit: icntl=0]
 file   = deposit-xz-1.out
 mesh   = xyz
 x-type = 2
 nx     =  128
 xmin   = c87        -32.50000
 xmax   = c87+c81*c84-32.50000
 y-type = 2
 ny     =    1
 ymin   = c92        -1.0
 ymax   = c92        +1.0
 z-type = 2
 nz     =   74
 zmin   = c89        -29.75100
 zmax   = c89+c83*c86-29.75100
 unit   = 0
 axis   = xz
 output = dose
 epsout = 1
 gshow  = 1
 gslat  = 0

[ T-Deposit ]
 title  = [t-deposit: icntl=0]
 file   = deposit-yz-1.out
 mesh   = xyz
 x-type = 2
 nx     =  1
 xmin   = c91        -1.0
 xmax   = c91        +1.0
 y-type = 2
 ny     =  128
 ymin   = c88        -32.50000
 ymax   = c88+c82*c85-32.50000
 z-type = 2
 nz     =   74
 zmin   = c89        -29.75100
 zmax   = c89+c83*c86-29.75100
 unit   = 0
 axis   = yz
 output = dose
 epsout = 1
 gshow  = 1
 gslat  = 0

[ End ]
